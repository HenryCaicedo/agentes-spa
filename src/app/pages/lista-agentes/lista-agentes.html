<h2 class="text-2xl font-bold mb-4">Lista de Agentes</h2>

<div class="mb-4">
    <input type="text" [(ngModel)]="searchTerm" (input)="filtrarAgentes()"
        placeholder="Buscar por nombre, rol, estado o cursos..."
        class="w-full md:w-1/2 border rounded-full px-3 py-2 border-gray-200 bg-gray-200 " />
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    @for (agente of agentesFiltrados; track agente.id) {
    <div class="p-4 bg-white rounded-2xl shadow hover:shadow-lg transition duration-500 border-opacity-100">

        <div class="space-y-1">
            <h3 class="text-lg font-semibold">{{ agente.nombre }}</h3>
            <p class="text-gray-600">Rol: {{ agente.rol }}</p>
            <p class="text-gray-600">
                Estado:
                <span class="text-sm font-medium px-2 py-0.5 rounded-md" [ngClass]="{
                    'bg-green-100 text-green-800': agente.estado === 'activo',
                    'bg-red-100 text-red-600': agente.estado === 'inactivo'
                }">
                    {{ agente.estado | uppercase }}
                </span>
            </p>
            <p class="text-gray-600">Cursos: {{ agente.cursos.length }}</p>

        </div>

        <div class="mt-3 flex gap-2 justify-end">
            <a [routerLink]="['/crear']" [queryParams]="{id: agente.id}"
                class="px-4 py-1 text-blue-600 hover:underline hover:text-blue-800 rounded-xl text-md transition flex items-center gap-1">
                Editar
            </a>
            <a [routerLink]="['/agentes', agente.id]"
                class="px-4 py-1 bg-blue-600 text-white rounded-xl hover:bg-blue-700 text-md transition">Ver detalle</a>
        </div>
    </div>
    }
</div>

@if (agentesFiltrados.length === 0) {
<p class="text-gray-500 mt-6">No hay agentes que coincidan con la bÃºsqueda.</p>
}